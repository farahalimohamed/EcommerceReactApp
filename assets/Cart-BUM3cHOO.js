import{b as i,C as P,u as V,j as e,L as p,V as u}from"./index-DxzwiYFp.js";import{H as E}from"./Helmet-DlFjghzm.js";import{L as H}from"./Loader-DHVGsxAk.js";import{E as M}from"./empty-cart-BG5WlCOO.js";function L(){const{getLoggedCart:y,removeProductFromCart:f,updateProductQuantity:b,clearCart:j,setNumOfCartItems:c,setCartId:v,setTotalCartPrice:o}=i.useContext(P),[s,n]=i.useState(null),[d,m]=i.useState("online"),N=V();async function w(){let a=await y();n(a.data),o(a.data.totalCartPrice)}i.useEffect(()=>{w()},[]);async function C(a){let t=await f(a);console.log(t),t.status==="success"?(u.success("Product removed successfully from cart"),n(t.data),c(t.numOfCartItems),v(t.cartId)):u.error("Error removing product from cart")}async function x(a,t){let l=await b(a,t);n(l.data),o(l.data.totalCartPrice)}async function k(){let a=await j();n({...a.data,products:[]}),c(0)}return e.jsxs("div",{children:[e.jsx(E,{children:e.jsx("title",{children:"Cart"})}),s?s.products&&s.products.length>0?e.jsxs("div",{className:"max-w-5xl max-md:max-w-md mx-auto bg-white py-4 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Shopping Cart"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mt-16",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[s.products.map(a=>{var t,l,h,g;return e.jsxs("div",{className:"grid grid-cols-3 items-start gap-4",children:[e.jsxs("div",{className:"col-span-2 flex items-start gap-4",children:[e.jsx("div",{className:"w-28 h-28 max-sm:w-24 max-sm:h-24 shrink-0 bg-gray-100 p-2 rounded-md",children:e.jsx("img",{src:(t=a.product)==null?void 0:t.imageCover,className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-base font-bold text-gray-800",children:(l=a.product)==null?void 0:l.title}),e.jsxs("p",{className:"text-xs font-semibold text-gray-500 mt-0.5",children:["Brand: ",(g=(h=a.product)==null?void 0:h.brand)==null?void 0:g.name]}),e.jsxs("button",{onClick:()=>{var r;return C((r=a.product)==null?void 0:r._id)},className:"mt-6 font-semibold text-red-500 text-xs flex items-center gap-1 shrink-0",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 fill-current inline",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z","data-original":"#000000"}),e.jsx("path",{d:"M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z","data-original":"#000000"})]}),"REMOVE"]})]})]}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("h4",{className:"text-lg max-sm:text-base font-bold text-gray-800",children:[a.price," EGP"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsx("button",{disabled:a.count===1,onClick:()=>{var r;return x((r=a.product)==null?void 0:r._id,a.count-1)},type:"button",className:"mt-1 flex items-center px-3 py-1.5 disabled:opacity-50 border border-gray-300 text-gray-800 text-xs outline-none bg-transparent rounded-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-2.5 fill-current",viewBox:"0 0 124 124",children:e.jsx("path",{d:"M112 50H12C5.4 50 0 55.4 0 62s5.4 12 12 12h100c6.6 0 12-5.4 12-12s-5.4-12-12-12z","data-original":"#000000"})})}),e.jsx("span",{className:"mx-2 font-bold",children:a.count}),e.jsx("button",{onClick:()=>{var r;return x((r=a.product)==null?void 0:r._id,a.count+1)},type:"button",className:"mt-1 flex items-center px-3 py-1.5 border border-gray-300 text-gray-800 text-xs outline-none bg-transparent rounded-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-2.5 fill-current",viewBox:"0 0 42 42",children:e.jsx("path",{d:"M37.059 16H26V4.941C26 2.224 23.718 0 21 0s-5 2.224-5 4.941V16H4.941C2.224 16 0 18.282 0 21s2.224 5 4.941 5H16v11.059C16 39.776 18.282 42 21 42s5-2.224 5-4.941V26h11.059C39.776 26 42 23.718 42 21s-2.224-5-4.941-5z","data-original":"#000000"})})})]})]})]},a._id)}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs("button",{onClick:()=>k(),className:"mt-6 font-semibold text-red-500 uppercase flex items-center gap-1 shrink-0",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 fill-current inline",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z","data-original":"#000000"}),e.jsx("path",{d:"M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z","data-original":"#000000"})]}),"Clear Cart"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Payment"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 ps-4 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx("input",{id:"online-payment","aria-describedby":"online-payment-text",type:"radio",name:"payment",value:"online",checked:d==="online",onChange:a=>m(a.target.value),className:"h-4 w-4 border-gray-300 bg-white text-primary-600 focus:ring-2 focus:ring-primary-600 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-primary-600"})}),e.jsxs("div",{className:"ms-4 text-sm",children:[e.jsx("label",{htmlFor:"online-payment",className:"font-medium leading-none text-gray-900 dark:text-white",children:"Online Payment"}),e.jsx("p",{id:"online-payment-text",className:"mt-1 text-xs font-normal text-gray-500 dark:text-gray-400",children:"Pay with your credit card"})]})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 ps-4 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx("input",{id:"cash","aria-describedby":"cash-text",type:"radio",name:"payment",value:"cash",checked:d==="cash",onChange:a=>m(a.target.value),className:"h-4 w-4 border-gray-300 bg-white text-primary-600 focus:ring-2 focus:ring-primary-600 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-primary-600"})}),e.jsxs("div",{className:"ms-4 text-sm",children:[e.jsx("label",{htmlFor:"cash",className:"font-medium leading-none text-gray-900 dark:text-white",children:"Payment on delivery"}),e.jsx("p",{id:"cash-text",className:"mt-1 text-xs font-normal text-gray-500 dark:text-gray-400",children:"Pay when you receive your order"})]})]})})]})]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-md p-4 h-max",children:[e.jsx("h3",{className:"text-lg max-sm:text-base font-bold text-gray-800 border-b border-gray-300 pb-2",children:"Order Summary"}),e.jsxs("ul",{className:"text-gray-800 mt-6 space-y-3",children:[e.jsxs("li",{className:"flex flex-wrap gap-4 text-sm",children:["Subtotal"," ",e.jsxs("span",{className:"ml-auto font-bold",children:[s.totalCartPrice?s.totalCartPrice:"0.00"," ","EGP"]})]}),e.jsxs("li",{className:"flex flex-wrap gap-4 text-sm",children:["Shipping ",e.jsx("span",{className:"ml-auto font-bold",children:"0.00"})]}),e.jsxs("li",{className:"flex flex-wrap gap-4 text-sm",children:["Tax ",e.jsx("span",{className:"ml-auto font-bold",children:"0.00"})]}),e.jsx("hr",{className:"border-gray-300"}),e.jsxs("li",{className:"flex flex-wrap gap-4 text-sm font-bold",children:["Total"," ",e.jsxs("span",{className:"ml-auto",children:[s.totalCartPrice?s.totalCartPrice:"0.00"," ","EGP"]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col space-y-3",children:[e.jsx("button",{onClick:()=>{N("/checkout",{state:d})},className:"text-sm text-center px-4 py-2.5 w-full font-semibold tracking-wide bg-[#6456ff] hover:bg-[#5647ff] hover:text-white text-white rounded-md",children:"Checkout"}),e.jsx(p,{to:"/products",className:"text-sm text-center px-4 py-2.5 w-full font-semibold tracking-wide bg-transparent text-gray-800 border border-gray-300 rounded-md",children:"Continue Shopping"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 my-10",children:[e.jsx("img",{src:M,className:"h-80"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mt-2",children:"Your cart is empty"}),e.jsx(p,{to:"/products",className:"text-sm text-center px-4 py-2.5 mt-4 font-semibold tracking-wide bg-[#6456ff] hover:bg-[#5647ff] hover:text-white text-white rounded-md",children:"Continue Shopping"})]}):e.jsx(H,{})]})}export{L as default};
