import{b as n,j as e,e as g,u as y}from"./index-DxzwiYFp.js";import{c as h,a as b,u as f,A as p}from"./index-CfIhnN1b.js";import{H as w}from"./Helmet-DlFjghzm.js";const j="/EcommerceReactApp/assets/forgot-BV0FV8nv.webp",k="/EcommerceReactApp/assets/pay-CA-bYMsW.webp";function v({email:d,onSubmit:l}){const[a,o]=n.useState(null),[i,t]=n.useState(!1),m={resetCode:""},c=h({resetCode:b().required("Reset code is required").matches(/^\d{6}$/,"Reset code must be exactly 6 digits")});async function r(u){t(!0);try{const x=await g.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{...u,email:d});o(null),t(!1),l()}catch(x){o(x.response.data.message),t(!1)}}const s=f({initialValues:m,validationSchema:c,onSubmit:r});return e.jsxs("section",{className:"flex items-center justify-center min-h-screen bg-[#978eff46]",children:[e.jsx(w,{children:e.jsx("title",{children:"Verify Reset Code"})}),e.jsxs("div",{className:"flex max-w-5xl w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"hidden md:block md:w-1/2",children:e.jsx("img",{src:k,alt:"verify-reset-code",className:"mx-auto"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 pb-4",children:"Verify Reset Code"})}),e.jsx("div",{className:"w-full bg-white rounded-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",onSubmit:s.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resetCode",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Reset Code"}),e.jsx("input",{type:"text",name:"resetCode",id:"resetCode",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter reset code",value:s.values.resetCode,onChange:s.handleChange,onBlur:s.handleBlur}),s.errors.resetCode&&s.touched.resetCode&&e.jsx("small",{className:"text-red-600",children:s.errors.resetCode})]}),a&&e.jsx("div",{className:"bg-red-300 p-3 rounded-md",children:a}),i?e.jsx("button",{type:"submit",disabled:!0,className:"w-full text-white flex justify-center items-center bg-[#6456FF] disabled:bg-[#978eff] hover:bg-[#5647ff] font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-[#6456FF] dark:disabled:bg-[#978eff] dark:hover:bg-[#5647ff]",children:e.jsx(p,{className:"animate-spin"})}):e.jsx("button",{type:"submit",className:"w-full text-white bg-[#6456FF] hover:bg-[#5647ff] font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-[#6456FF] dark:hover:bg-[#5647ff]",disabled:!s.isValid||!s.dirty,children:"Verify"})]})})})]})]})]})}const N="/EcommerceReactApp/assets/sale2-Dkten3I1.webp";function F({email:d,onSubmit:l}){const[a,o]=n.useState(null),[i,t]=n.useState(!1),m={email:d,newPassword:""},c=h({email:b().email("Invalid email format").required("Email is required"),newPassword:b().min(6,"Password must be at least 6 characters").required("Password is required")});async function r(u){t(!0);try{const x=await g.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",u);o(null),t(!1),l()}catch(x){o(x.response.data.message),t(!1)}}const s=f({initialValues:m,validationSchema:c,onSubmit:r});return e.jsxs("section",{className:"flex items-center justify-center min-h-screen bg-[#978eff46]",children:[e.jsx(w,{children:e.jsx("title",{children:"Reset Password"})}),e.jsxs("div",{className:"flex max-w-5xl w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"hidden md:block md:w-1/2",children:e.jsx("img",{src:N,alt:"reset-password",className:"mx-auto"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 pb-4",children:"Reset Your Password"})}),e.jsx("div",{className:"w-full bg-white rounded-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",onSubmit:s.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",value:s.values.email,onChange:s.handleChange,onBlur:s.handleBlur}),s.errors.email&&s.touched.email&&e.jsx("small",{className:"text-red-600",children:s.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",id:"newPassword",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter new password",value:s.values.newPassword,onChange:s.handleChange,onBlur:s.handleBlur}),s.errors.newPassword&&s.touched.newPassword&&e.jsx("small",{className:"text-red-600",children:s.errors.newPassword})]}),a&&e.jsx("div",{className:"bg-red-300 p-3 rounded-md",children:a}),i?e.jsx("button",{type:"submit",disabled:!0,className:"w-full text-white flex justify-center items-center bg-[#6456FF] disabled:bg-[#978eff] hover:bg-[#5647ff] font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-[#6456FF] dark:disabled:bg-[#978eff] dark:hover:bg-[#5647ff]",children:e.jsx(p,{className:"animate-spin"})}):e.jsx("button",{type:"submit",className:"w-full text-white bg-[#6456FF] hover:bg-[#5647ff] font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-[#6456FF] dark:hover:bg-[#5647ff]",disabled:!s.isValid||!s.dirty,children:"Reset Password"})]})})})]})]})]})}function E(){const[d,l]=n.useState("forgotPassword"),[a,o]=n.useState(""),i=y(),t=r=>{o(r),l("verifyResetCode")},m=()=>{l("resetPassword")},c=()=>{i("/login")};return e.jsxs(e.Fragment,{children:[d==="forgotPassword"&&e.jsx(P,{onSubmit:t}),d==="verifyResetCode"&&e.jsx(v,{email:a,onSubmit:m}),d==="resetPassword"&&e.jsx(F,{email:a,onSubmit:c})]})}function P({onSubmit:d}){const[l,a]=n.useState(null),[o,i]=n.useState(!1),t={email:""},m=h({email:b().email("Invalid email format").required("Email is required")});async function c(s){i(!0);try{const u=await g.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",s);a(null),i(!1),d(s.email)}catch(u){a(u.response.data.message),i(!1)}}const r=f({initialValues:t,validationSchema:m,onSubmit:c});return e.jsxs("section",{className:"flex items-center justify-center min-h-screen bg-[#978eff46]",children:[e.jsx(w,{children:e.jsx("title",{children:"Forgot Password"})}),e.jsxs("div",{className:"flex max-w-5xl w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"hidden md:block md:w-1/2",children:e.jsx("img",{src:j,alt:"forgot-password",className:"mx-auto"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 pb-4",children:"Reset Your Password"})}),e.jsx("div",{className:"w-full bg-white rounded-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",onSubmit:r.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur}),r.errors.email&&r.touched.email&&e.jsx("small",{className:"text-red-600",children:r.errors.email})]}),l&&e.jsx("div",{className:"bg-red-300 p-3 rounded-md",children:l}),o?e.jsx("button",{type:"submit",disabled:!0,className:"w-full text-white flex justify-center items-center bg-[#6456FF] disabled:bg-[#978eff] hover:bg-[#5647ff] font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-[#6456FF] dark:disabled:bg-[#978eff] dark:hover:bg-[#5647ff]",children:e.jsx(p,{className:"animate-spin"})}):e.jsx("button",{type:"submit",className:"btn",disabled:!r.isValid||!r.dirty,children:"Email Me"})]})})})]})]})]})}export{E as default};
